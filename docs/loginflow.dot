digraph {
    HomePage -> LoginLink
    DenyPage -> StoreDestination
    StoreDestination -> LoginLink
    LoginLink -> GithubAuthorize
    GithubAuthorize -> Callback
    Callback -> GotCode
    GotCode -> ErrorPage
    GotCode -> GetUser
    GetUser -> New
    GetUser -> ErrorPage
    New [label="New?"]
    New -> SetCookie [label="already exists"]
    SetCookie -> Destination
    New -> Prompt [label="new user"]
    Prompt -> AddToDB
    AddToDB -> ErrorPage
    AddToDB -> SetCookie
}